---
import Layout from '../layouts/Layout.astro';
import { getSchedule } from '../lib/api';

const currentYear = 2025;
const schedule = await getSchedule(currentYear);
---

<Layout title={`F1 Schedule ${currentYear}`}>
  <div class="max-w-7xl mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold mb-8">{currentYear} Race Calendar</h1>

    <div class="bg-gray-900/50 border border-gray-800 rounded-lg overflow-hidden">
      <table class="w-full">
        <thead class="bg-gray-800/50 border-b border-gray-700">
          <tr>
            <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase">Round</th>
            <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase">Grand Prix</th>
            <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase">Location</th>
            <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase">Date</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-800">
          {schedule.map((race) => {
            const date = new Date(race.EventDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            return (
              <tr class="hover:bg-gray-800/50">
                <td class="px-6 py-4">{race.RoundNumber}</td>
                <td class="px-6 py-4 font-medium">{race.EventName}</td>
                <td class="px-6 py-4 text-gray-400">{race.Location}, {race.Country}</td>
                <td class="px-6 py-4">{date}</td>
              </tr>
            );
          })}
        </tbody>
      </table>
    </div>
  </div>
</Layout>
